<!DOCTYPE>
<html>
  <head>
    <title>Prefer Green</title>
    <link rel="icon" href="./assets/leaf.png">
    <!-- CSS only -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/5.0.0-alpha1/css/bootstrap.min.css" integrity="sha384-r4NyP46KrjDleawBgD5tp8Y7UzmLA05oM1iAEQ17CSuDqnUK2+k9luXQOfXJCJ4I" crossorigin="anonymous">
    <link rel="stylesheet" href="./styles.css">
    <!-- JavaScript and dependencies -->
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js" integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/5.0.0-alpha1/js/bootstrap.min.js" integrity="sha384-oesi62hOLfzrys4LxRF63OJCXdXDipiYWBnvTl9Y9/TRlw5xlKIEHpNyvvDShgf/" crossorigin="anonymous"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
  </head>
  <body>
    <!-- Navbar -->
    <nav class="py-3 navbar navbar-expand-lg fixed-top auto-hiding-navbar">
    <div class="container">
      <a class="navbar-brand" href="#">
        <img class="logo" src="./assets/leaf.png" /> Group 22
      </a>
      <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
      </button>
      <div class="collapse navbar-collapse" id="navbarSupportedContent">
        <ul class="navbar-nav ml-auto">
          <li class="nav-item">
            <a class="nav-link active" aria-current="page" href="index.html">Home</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="overview.html">Overview</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="tree.html">Demo</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="sources.html">Sources</a>
          </li>
        </ul>
      </div>
    </div>
  </nav>
  <!-- End Navbar -->
  </body>
  <section class="tree-section">
    <div class="tree-div">
    <div>
        <div id="tree-parent" class="tree-parent">
        <img class="tree" src="./assets/branch.png" />
        <div style="font-size: 50px; color:forestgreen; position: absolute; top: 20px;left: 0; padding: 20px"> Mother Earth:</div>
        <div style="font-size: 25px; color:forestgreen; position: absolute; top: 80px;left: 0; padding: 20px;"> Nations' Green Energy Preference vs Some Other Metrics (Click on leaves for more info)</div>
        <img style="position: absolute;top: 120px;left: 20px;width: 40%;" src="./assets/legend.png" />
        <script src="./country_vals.js"></script>
        <script>
            console.log(leaf)
            var arrayLength = leaf.length;
            for (let i = 0; i < arrayLength; i++) {
                pos = "top: " + leaf[i]["y"] + "px; left: " + leaf[i]["x"]  + "px;"; 
                source = "./assets/leaves/"+leaf[i]["region"]+"/" +leaf[i]["Code"]+ ".png"
                $('#tree-parent').append($('<img/>', { id: leaf[i]["Code"], 'class' : 'leaf', 'style' : pos, 'src' : source}))
                pos = "top: " + (parseInt(leaf[i]["y"])+10)+ "px; left: " + (parseInt(leaf[i]["x"]) + 20)+ "px;"; 
                var ss = {
                    id: leaf[i]["Code"]+"name",
                    style: 'font-size: 10px; color: black; ' + pos + '; position: absolute; border-radius: 5px; border: 2px solid #000000; background-color: white'
                };
                var $div = $("<div>", ss);
                $div.html(leaf[i]["LOCATION"]);
                $("#tree-parent").append($div);
                let window_id = leaf[i]["Code"] + "pop";
                
                $('#tree-parent').append($('<div/>', { id: window_id, 'class' : 'window'}))
                $('#'+window_id).append($('<img/>', { id: window_id+"IMG", 'class' : 'window_leaf', 'src' : source}))
                $('#'+window_id).append($('<div/>', { id: window_id+"IMG_close", 'class' : 'window_close'}))
                $('#'+window_id).append($('<div/>', { id: window_id+"IMG_name", 'style' : 'font-size: 30px; top: 20px; left: 30px; color: black; position: absolute; border-radius: 5px; border: 2px solid #000000; background-color: white', 'html' : leaf[i]["LOCATION"]}))
                $('#'+window_id).append($('<div/>', { id: window_id+"IMG_plot1", 'style' : 'height: 390px; width: 560px; top: 80px; left: 30px; color: black; position: absolute; border-radius: 5px; border: 2px solid #000000; background-color: rgba(146, 146, 146, 0.647)'}))
                $('#'+window_id).append($('<div/>', { id: window_id+"IMG_plot2", 'style' : 'height: 390px; width: 560px; top: 80px; left: 600px; color: black; position: absolute; border-radius: 5px; border: 2px solid #000000; background-color: rgba(146, 146, 146, 0.647)'}))
                $('#'+window_id).append($('<div/>', { id: window_id+"IMG_plot3", 'style' : 'height: 390px; width: 560px; top: 500px; left: 30px; color: black; position: absolute; border-radius: 5px; border: 2px solid #000000; background-color: rgba(146, 146, 146, 0.647)'}))
                $('#'+window_id).append($('<div/>', { id: window_id+"IMG_plot4", 'style' : 'height: 390px; width: 560px; top: 500px; left: 600px; color: black; position: absolute; border-radius: 5px; border: 2px solid #000000; background-color: rgba(146, 146, 146, 0.647)'}))
                $('#'+window_id).append($('<div/>', { id: window_id+"IMG_text", 'style' : 'padding: 10px; font-size: 15px; height: 80px; width: 1130px; top: 900px; left: 30px; color: black; position: absolute; border-radius: 5px; border: 2px solid #000000; background-color: rgba(146, 146, 146, 0.647)', 'html': leaf[i]["info"]}))
                $('#'+window_id+"IMG_plot1").append($('<img/>', { id: window_id+"IMG_plot1_img", 'class' : 'plot', 'src' : "./assets/plots/Crude_Prod/"+leaf[i]["Code"]+"_crude.png"}))
                $('#'+window_id+"IMG_plot2").append($('<img/>', { id: window_id+"IMG_plot2_img", 'class' : 'plot', 'src' : "./assets/plots/Fossil_Use/"+leaf[i]["Code"]+"_fossil_use.png"}))
                $('#'+window_id+"IMG_plot3").append($('<img/>', { id: window_id+"IMG_plot3_img", 'class' : 'plot', 'src' : "./assets/plots/Green_Energy/"+leaf[i]["Code"]+"_green_nrg.png"}))
                $('#'+window_id+"IMG_plot4").append($('<img/>', { id: window_id+"IMG_plot4_img", 'class' : 'plot', 'src' : "./assets/plots/GDP_per_Cap/"+leaf[i]["Code"]+"_gdp_cap.png"}))
                console.log(window_id)
                $("#"+leaf[i]["Code"]).on('click', function() {
                  console.log(window_id)
                  $('#'+window_id).css({
                    'visibility': 'visible',
                });
                $('#'+leaf[i]["Code"]+"name",).css({
                    'position': '',
                });
                  /*$("#div2,#div3,#div4").fadeOut();*/
                });

                $("#"+window_id+"IMG_close").on('click', function() {
                  console.log(window_id)
                  $('#'+window_id).css({
                    'visibility': 'hidden',
                });
                $('#'+leaf[i]["Code"]+"name",).css({
                    'position': 'absolute',
                });
                  /*$("#div2,#div3,#div4").fadeOut();*/
                });

                console.log(leaf[i]);
            }
        </script>
</div>
    </section>
</html>
    
